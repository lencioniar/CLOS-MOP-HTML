<HTML>
  <HEAD>
    <TITLE>Restrictions on implementations</TITLE>
    <LINK rel="stylesheet" type="text/css" href="clos-mop.css">
  </HEAD>
  <BODY>

    <nav><ul class=navigation>
      <li class=navigation>
	<a href="table-of-contents.html" title="Table of contents"><img src="toc.png" alt="TOC"></a>
      </li>
      <li class=navigation>
	<a href="implementation-and-user-specialization.html" title="Prev" rel="prev"><img src="prev.png" alt="Prev"></a>
      </li>
      <li class=navigation>
	<a href="implementation-and-user-specialization.html" title="Up"><img src="up.png" alt="Up"></a>
      </li>
      <li class=navigation>
	<a href="restrictions-on-portable-programs.html" title="Next" rel="next"><img src="next.png" alt="Next"></a>
      </li>
    </ul></nav>

    <H4>Restrictions on implementations</H4>

    <P>
      Implementations are allowed latitude to modify the structure of
      specified classes and methods.  This includes: the interposition
      of implementation-specific classes; the promotion of specified
      methods; and the consolidation of two or more specified methods
      into a single method specialized to interposed classes.
    </P>

    <P>
      Any such modifications are permitted only so long as for any
      portable class <I>C</I><sub>p</sub> that is a subclass of one or
      more specified classes <I>C</I><sub>0</sub>
      ... <I>C</I><sub>i</sub>, the following conditions are met:
    </P>

    <UL>
      <LI>
	<P>
	  In the actual class precedence list of <I>C</I><sub>p</sub>,
	  the classes <I>C</I><sub>0</sub> ... <I>C</I><sub>i</sub>
	  must appear in the same order as they would have if no
	  implementation-specific modifications had been made.
	</P>
      </LI>

      <LI>
	<P>
	  The method applicability of any specified generic function
	  must be the same in terms of behavior as it would have been
	  had no implementation-specific changes been made.  This
	  includes specified generic functions that have had portable
	  methods added.  In this context, the expression ``the same
	  in terms of behavior'' means that methods with the same
	  behavior as those specified are applicable, and in the same
	  order.
	</P>
      </LI>

      <LI>
	<P>
	  No portable class <I>C</I><sub>p</sub> may inherit, by virtue
	  of being a direct or indirect subclass of a specified class,
	  any slot for which the name is a symbol accessible in the
	  <TT>common-lisp-user</TT> package or exported by any package
	  defined in the ANSI Common Lisp standard.
	</P>
      </LI>

      <LI>
	<P>
	  Implementations are free to define implementation-specific
	  before- and after-methods on specified generic functions.
	  Implementations are also free to define
	  implementation-specific around-methods with extending
	  behavior.
	</P>
      </LI>
    </UL>
  </BODY>
</HTML>
